{"version":3,"sources":["../../src/js/index.js"],"names":["PubSub","events","event","callback","console","error","undefined","listeners","push","onceCallback","unsubscribe","apply","arguments","bind","subscribe","filter","listener","toString","data","forEach"],"mappings":";;;;;;;;;;;;;;;AAAA;;;;;;IAMMA,M;;;AACJ,oBAAc;AAAA;;AACZ;;;;AAIA,SAAKC,MAAL,GAAc,EAAd;AACD;AAED;;;;;;;;;;8BAMUC,K,EAAOC,Q,EAAU;AACzB;AACA,UAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClCC,QAAAA,OAAO,CAACC,KAAR,+EAAoFF,QAApF;AACA,eAAO,KAAP;AACD,OALwB,CAOzB;;;AACA,UAAI,OAAOD,KAAP,KAAiB,QAArB,EAA+B;AAC7BE,QAAAA,OAAO,CAACC,KAAR,sEAA2EH,KAA3E;AACA,eAAO,KAAP;AACD,OAXwB,CAazB;;;AACA,UAAI,KAAKD,MAAL,CAAYC,KAAZ,MAAuBI,SAA3B,EAAsC;AACpC,aAAKL,MAAL,CAAYC,KAAZ,IAAqB;AACnBK,UAAAA,SAAS,EAAE;AADQ,SAArB;AAGD,OAlBwB,CAmBzB;;;AACA,WAAKN,MAAL,CAAYC,KAAZ,EAAmBK,SAAnB,CAA6BC,IAA7B,CAAkCL,QAAlC;AACD;AAED;;;;;;;;;;kCAOcD,K,EAAOC,Q,EAAU;AAC7B,UAAMM,YAAY,GAAI,YAAY;AAChC,aAAKC,WAAL,CAAiBR,KAAjB,EAAwBO,YAAxB;AACAN,QAAAA,QAAQ,CAACQ,KAAT,CAAe,IAAf,EAAqBC,SAArB;AACD,OAHoB,CAGlBC,IAHkB,CAGb,IAHa,CAArB;;AAKA,WAAKC,SAAL,CAAeZ,KAAf,EAAsBO,YAAtB;AACD;AAED;;;;;;;;;gCAMYP,K,EAAOC,Q,EAAU;AAC3B;AACA,UAAI,KAAKF,MAAL,CAAYC,KAAZ,MAAuBI,SAA3B,EAAsC;AACpCF,QAAAA,OAAO,CAACC,KAAR,uBAA6BH,KAA7B;AACA,eAAO,KAAP;AACD;;AAED,WAAKD,MAAL,CAAYC,KAAZ,EAAmBK,SAAnB,GAA+B,KAAKN,MAAL,CAAYC,KAAZ,EAAmBK,SAAnB,CAA6BQ,MAA7B,CAAoC,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACC,QAAT,OAAwBd,QAAQ,CAACc,QAAT,EAA5B;AAAA,OAA5C,CAA/B;AACD;AAED;;;;;;mCAGe;AACb,WAAKhB,MAAL,GAAc,EAAd;AACD;AAED;;;;;;;;;4BAMQC,K,EAAkB;AAAA,UAAXgB,IAAW,uEAAJ,EAAI;;AACxB;AACA,UAAI,KAAKjB,MAAL,CAAYC,KAAZ,MAAuBI,SAA3B,EAAsC;AACpCF,QAAAA,OAAO,CAACC,KAAR,uBAA6BH,KAA7B;AACA,eAAO,KAAP;AACD,OALuB,CAMxB;;;AACA,WAAKD,MAAL,CAAYC,KAAZ,EAAmBK,SAAnB,CAA6BY,OAA7B,CAAqC,UAAAH,QAAQ;AAAA,eAAIA,QAAQ,CAACE,IAAD,CAAZ;AAAA,OAA7C;AACD;;;;;;eAGYlB,M","sourcesContent":["/**\r\n * Pubsub is simple pubsub implementation using JavaScript\r\n * @class\r\n * @constructor\r\n * @public\r\n */\r\nclass PubSub {\r\n  constructor() {\r\n    /**\r\n     *  Init object events\r\n     * @type {Object}\r\n     */\r\n    this.events = {};\r\n  }\r\n\r\n  /**\r\n   * Listen to an event.\r\n   *\r\n   * @param {string} event - event names to bind to\r\n   * @param {function} callback - action that will be executed when even is fired.\r\n   */\r\n  subscribe(event, callback) {\r\n    // Check if the callback is not a function\r\n    if (typeof callback !== 'function') {\r\n      console.error(`The listener callback must be a function, the given type is ${typeof callback}`);\r\n      return false;\r\n    }\r\n\r\n    // Check if the event is not a string\r\n    if (typeof event !== 'string') {\r\n      console.error(`The event name must be a string, the given type is ${typeof event}`);\r\n      return false;\r\n    }\r\n\r\n    // Check if this event not exists\r\n    if (this.events[event] === undefined) {\r\n      this.events[event] = {\r\n        listeners: []\r\n      };\r\n    }\r\n    // We know we've got an array for this event, so push our callback in there with no fuss\r\n    this.events[event].listeners.push(callback);\r\n  }\r\n\r\n  /**\r\n   * Attach a callback to an name, but once only. Will disapear after first execution.\r\n   *\r\n   * @param {string} event - event names to bind to\r\n   * @param {Function} callback - Action that will be executed when even is fired.\r\n   * @see https://gist.github.com/jashmenn/b306add36d3e6f0f6483\r\n   */\r\n  subscribeOnce(event, callback) {\r\n    const onceCallback = (function () {\r\n      this.unsubscribe(event, onceCallback);\r\n      callback.apply(this, arguments);\r\n    }).bind(this);\r\n\r\n    this.subscribe(event, onceCallback);\r\n  }\r\n\r\n  /**\r\n   * Remove a specific listener to an event.\r\n   *\r\n   * @param {string} event - event names to bind to\r\n   * @param {function} callback - Action that will be executed when even is fired.\r\n   */\r\n  unsubscribe(event, callback) {\r\n    // Check if this event not exists\r\n    if (this.events[event] === undefined) {\r\n      console.error(`This event: ${event} does not exist`);\r\n      return false;\r\n    }\r\n\r\n    this.events[event].listeners = this.events[event].listeners.filter(listener => listener.toString() !== callback.toString());\r\n  }\r\n\r\n  /**\r\n   * Removes all the subscriptions\r\n   */\r\n  unsubscribes() {\r\n    this.events = {};\r\n  }\r\n\r\n  /**\r\n   * Notify subscriptions by calling their name\r\n   *\r\n   * @param {string} event - event to fire\r\n   * @param {object} [data={}] - params to distribute to the callbacks\r\n   */\r\n  publish(event, data = {}) {\r\n    // Check if this event not exists\r\n    if (this.events[event] === undefined) {\r\n      console.error(`This event: ${event} does not exist`);\r\n      return false;\r\n    }\r\n    // Get each subscription and call its callback with the passed data\r\n    this.events[event].listeners.forEach(listener => listener(data));\r\n  }\r\n}\r\n\r\nexport default PubSub;\r\n"],"file":"index.js"}